{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cocoa/Documents/GitHub/MovieWeb/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/cocoa/Documents/GitHub/MovieWeb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/cocoa/Documents/GitHub/MovieWeb/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/Users/cocoa/Documents/GitHub/MovieWeb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import styles from\".//css/Home.module.css\";import Slide from\"../components/Slide\";import navList from\"../atom/NavList\";import axios from\"axios\";import Loading from\"../components/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){/* API 받아오기 */var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movieContents=_useState2[0],setMovieContents=_useState2[1];useEffect(function(){/* map으로 navList의 목록을 api로 받아온다 */var request=navList.map(function(_ref){var title=_ref.title,path=_ref.path;return axios.get('https://yts.mx/api/v2/list_movies.json?'+path,{params:_defineProperty({limit:10,sort_by:'download_count'},\"limit\",20)});});axios.all(request).then(axios.spread(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _len,response,_key,data,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:for(_len=_args.length,response=new Array(_len),_key=0;_key<_len;_key++){response[_key]=_args[_key];}_context.next=3;return response.map(function(res){if(res.status===200){return res.data.data.movies;}});case 3:data=_context.sent;console.log(data);setMovieContents(data);case 6:case\"end\":return _context.stop();}}},_callee);}))));},[]);/* 화면 그리기 */return/*#__PURE__*/_jsx(\"div\",{className:styles.container,children:navList.map(function(slide,idx){return/*#__PURE__*/_jsxs(\"div\",{className:styles.slide__box,children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:/*#__PURE__*/_jsxs(Link,{to:\"/page/\".concat(slide.path,\"/1\"),children:[/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-external-link-alt\"}),/*#__PURE__*/_jsxs(\"span\",{children:[slide.title,\" Movie\"]})]})}),movieContents&&movieContents.length===0?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(Slide,{movieContents:movieContents[idx]})]});})});}export default Home;","map":{"version":3,"names":["useEffect","useState","Link","styles","Slide","navList","axios","Loading","Home","movieContents","setMovieContents","request","map","title","path","get","params","limit","sort_by","all","then","spread","response","res","status","data","movies","console","log","container","slide","idx","slide__box","length"],"sources":["/Users/cocoa/Documents/GitHub/MovieWeb/src/router/Home.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport styles from \".//css/Home.module.css\";\nimport Slide from \"../components/Slide\";\nimport navList from \"../atom/NavList\";\nimport axios from \"axios\";\nimport Loading from \"../components/Loading\";\n\n\nfunction Home(){\n    \n    /* API 받아오기 */\n    const [ movieContents, setMovieContents ] = useState([]);\n  \n    useEffect(() => {\n\n        /* map으로 navList의 목록을 api로 받아온다 */\n        const request = navList.map(({title, path}) => {\n            return axios.get('https://yts.mx/api/v2/list_movies.json?' + path, {\n                params: {\n                  limit: 10,\n                  sort_by: 'download_count',\n                  limit: 20,\n                }\n            })\n        })\n\n        axios.all(request)\n        .then(axios.spread(async (...response) => {\n            const data = await response.map(res => {\n                if(res.status === 200){\n                    return res.data.data.movies;\n                }\n            })\n\n            console.log(data);\n            setMovieContents(data);\n        }))\n\n    }, []) \n\n    \n    /* 화면 그리기 */\n    return (\n        <div className={styles.container}>\n          {navList.map((slide, idx) => {\n            return (\n                \n              <div className={styles.slide__box}>\n                  <h3 className={styles.title}>\n                    <Link to={`/page/${slide.path}/1`}>\n                      <i class=\"fas fa-external-link-alt\"></i>\n                      <span>{slide.title} Movie</span>\n                    </Link>\n                  </h3>\n                  { movieContents && movieContents.length === 0 ? (\n                      <Loading />\n                    ) : (\n                      <Slide movieContents={movieContents[idx]} />\n                    )\n                  }\n              </div>\n            )\n          })}\n          \n        </div>\n    );\n}\n\nexport default Home;\n"],"mappings":"kgBAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAOC,OAAM,KAAM,wBAAwB,CAC3C,MAAOC,MAAK,KAAM,qBAAqB,CACvC,MAAOC,QAAO,KAAM,iBAAiB,CACrC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,QAAO,KAAM,uBAAuB,CAAC,wFAG5C,QAASC,KAAI,EAAE,CAEX,cACA,cAA4CP,QAAQ,CAAC,EAAE,CAAC,wCAAhDQ,aAAa,eAAEC,gBAAgB,eAEvCV,SAAS,CAAC,UAAM,CAEZ,kCACA,GAAMW,QAAO,CAAGN,OAAO,CAACO,GAAG,CAAC,cAAmB,IAAjBC,MAAK,MAALA,KAAK,CAAEC,IAAI,MAAJA,IAAI,CACrC,MAAOR,MAAK,CAACS,GAAG,CAAC,yCAAyC,CAAGD,IAAI,CAAE,CAC/DE,MAAM,kBACJC,KAAK,CAAE,EAAE,CACTC,OAAO,CAAE,gBAAgB,UAClB,EAAE,CAEf,CAAC,CAAC,CACN,CAAC,CAAC,CAEFZ,KAAK,CAACa,GAAG,CAACR,OAAO,CAAC,CACjBS,IAAI,CAACd,KAAK,CAACe,MAAM,wEAAC,uMAAUC,QAAQ,0CAARA,QAAQ,0CACdA,SAAQ,CAACV,GAAG,CAAC,SAAAW,GAAG,CAAI,CACnC,GAAGA,GAAG,CAACC,MAAM,GAAK,GAAG,CAAC,CAClB,MAAOD,IAAG,CAACE,IAAI,CAACA,IAAI,CAACC,MAAM,CAC/B,CACJ,CAAC,CAAC,QAJID,IAAI,eAMVE,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CACjBf,gBAAgB,CAACe,IAAI,CAAC,CAAC,sDAC1B,GAAC,CAAC,CAEP,CAAC,CAAE,EAAE,CAAC,CAGN,YACA,mBACI,YAAK,SAAS,CAAEtB,MAAM,CAAC0B,SAAU,UAC9BxB,OAAO,CAACO,GAAG,CAAC,SAACkB,KAAK,CAAEC,GAAG,CAAK,CAC3B,mBAEE,aAAK,SAAS,CAAE5B,MAAM,CAAC6B,UAAW,wBAC9B,WAAI,SAAS,CAAE7B,MAAM,CAACU,KAAM,uBAC1B,MAAC,IAAI,EAAC,EAAE,iBAAWiB,KAAK,CAAChB,IAAI,MAAK,wBAChC,UAAG,KAAK,CAAC,0BAA0B,EAAK,cACxC,wBAAOgB,KAAK,CAACjB,KAAK,YAAc,GAC3B,EACJ,CACHJ,aAAa,EAAIA,aAAa,CAACwB,MAAM,GAAK,CAAC,cACzC,KAAC,OAAO,IAAG,cAEX,KAAC,KAAK,EAAC,aAAa,CAAExB,aAAa,CAACsB,GAAG,CAAE,EAC1C,GAED,CAEV,CAAC,CAAC,EAEE,CAEd,CAEA,cAAevB,KAAI"},"metadata":{},"sourceType":"module"}